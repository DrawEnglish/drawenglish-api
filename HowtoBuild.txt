FastAPI + GitHub + Renderë¡œ DrawEnglish API ë‹¤ì‹œ êµ¬ì¶•

<ëª©í‘œ>
- ë¬¸ì¥ì„ ë¶„ì„í•˜ëŠ” POST /analyze API ë§Œë“¤ê¸°
- GitHubì— ì½”ë“œ ì˜¬ë¦¬ê³ 
- Renderì— ë°°í¬í•´ì„œ
- Custom GPTì— OpenAPI ì—°ê²°

1. ë¡œì»¬ì—ì„œ FastAPI í”„ë¡œì íŠ¸ ë§Œë“¤ê¸°

- ê¸°ë³¸ í´ë” êµ¬ì¡°
drawenglish-api/
â”œâ”€â”€ app/
â”‚   â””â”€â”€ main.py          ğŸ‘ˆ FastAPI ì•±
â”œâ”€â”€ openapi.json         ğŸ‘ˆ GPTìš© API ìŠ¤í™
â”œâ”€â”€ README.md
â”œâ”€â”€ requirements.txt     ğŸ‘ˆ ì˜ì¡´ì„± (FastAPI, Uvicorn ë“±)

2. FastAPI ì½”ë“œ(app/main.py)

3. OpenAPI ì½”ë“œ (openapi.json)
ğŸ‘‰ ë°°í¬ í›„ RENDER_URL ìë¦¬ì— ì‹¤ì œ Render ì£¼ì†Œ ë„£ì–´ì¤˜ì•¼ í•´

4. requirements.txt
fastapi
uvicorn

5. GitHubì— ì—…ë¡œë“œ
1. ë¡œì»¬ í´ë” ë§Œë“  í›„ ìœ„ íŒŒì¼ êµ¬ì„±
2. GitHub ë ˆí¬ì§€í† ë¦¬ ìƒì„± (ì˜ˆ : drawenglish-api)
3. ë‹¤ìŒ ëª…ë ¹ì–´

git init
git remote add origin https://github.com/drawenglish/drawenglish-api.git
git add .
git commit -m "Initial commit"
git push -u origin main

6. Renderì— ë°°í¬
1. https://render.com â†’ ìƒˆ Web Service ìƒì„±
2. GitHub ì—°ë™ í›„ drawenglish-api ì„ íƒ
3. í™˜ê²½ì„¤ì •
  - Start command: uvicorn app.main:app --host 0.0.0.0 --port 10000
  - Python build ìë™ ì¸ì‹ë¨
  - í¬íŠ¸ ì„¤ì • ìë™ ì²˜ë¦¬ë¨

âœ… ìµœì¢… í…ŒìŠ¤íŠ¸
ë°°í¬ê°€ ì™„ë£Œë˜ë©´:
https://drawenglish-api.onrender.com/analyze ì— POST ìš”ì²­ í…ŒìŠ¤íŠ¸
openapi.jsonë„ GET /openapi.jsonì— ì„œë¹™í•´ë„ ì¢‹ìŒ (í•„ìš”í•˜ë©´ ì½”ë“œ ì¶”ê°€í•´ì¤„ê²Œ!)

================================================================

â– â– â–  1. ë¡œì»¬ì—ì„œ FastAPI í”„ë¡œì íŠ¸ ë§Œë“¤ê¸°

C:\drawenglish-api í´ë” ìƒì„±
C:\drawenglish-api í´ë”ë¡œ ì´ë™

ê°€ìƒí™˜ê²½ ë§Œë“¤ê³  í™œì„±í™”
python -m venv venv  â†’ venv í´ë” ìƒê¹€ ?
venv\Scripts\activate â†’ (venv) C:\drawenglish-api> ë¡œ í”„ë¡¬í”„íŠ¸ ë°”ë€œ

í•„ìš”í•œ íŒ¨í‚¤ì§€ ì„¤ì¹˜
pip install fastapi uvicorn â† Fastapi íŒ¨í‚¤ì§€ ì„¤ì¹˜

*fastapi : APIë¥¼ ë§Œë“¤ ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” Python ì›¹ í”„ë ˆì„ì›Œí¬(ì„¤ê³„ë„êµ¬)
 ì‹ë‹¹ì„ ì„¤ê³„í•˜ê³  ìš”ë¦¬ ë©”ë‰´ë¥¼ ì§œëŠ” ê²ƒ(ì–´ë–¤ APIë¥¼ ë§Œë“¤ì§€ ì½”ë”©í•˜ëŠ” ì—­í• )
*uvicorn : FastAPI ì„œë²„ë¥¼ ì‹¤ì œë¡œ ëŒë ¤ì£¼ëŠ” ì´ˆê²½ëŸ‰ ASGI ì„œë²„(ì‹¤ì œë¡œ ë„ì›Œì£¼ëŠ” ì—”ì§„)
 ì‹ë‹¹ì—ì„œ ìš”ë¦¬ë¥¼ ì‹¤ì œë¡œ ì œê³µí•˜ëŠ” ê²ƒ(ì„œë²„ë¥¼ ì¼œê³  ìš”ì²­ì„ ë°›ì•„ ì‘ë‹µí•˜ëŠ” ì—­í• )


FastAPI ì•± ë§Œë“¤ê¸°
type nul > app\main.py
ë˜ëŠ” ë©”ëª¨ì¥ì—ì„œ ì—´ê¸°
notepad app\main.py
ì•„ë˜ ì†ŒìŠ¤ ì…ë ¥ í›„ ì €ì¥

from fastapi import FastAPI
from pydantic import BaseModel

app = FastAPI()

class AnalyzeRequest(BaseModel):
    sentence: str

class AnalyzeResponse(BaseModel):
    sentence: str
    diagramming: str

@app.post("/analyze", response_model=AnalyzeResponse)
async def analyze(request: AnalyzeRequest):
    sentence = request.sentence
    diagram = f"DrawEnglish diagram for: '{sentence}'"
    return {"sentence": sentence, "diagramming": diagram}


â˜…â˜…â˜… uvicorn app.main:app --reload
ìœ„ ëª…ë ¹ìœ¼ë¡œ ì‹¤í–‰í•´ ë³´ê¸° : app í´ë” ìƒê¹€?

â˜…â˜…â˜… ë¸Œë¼ìš°ì €ì—ì„œ: http://127.0.0.1:8000/docs
â†’ ìë™ìœ¼ë¡œ Swagger UI ëœ¨ê³  /analyze í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆì–´!
â€»GitHub, Renderìª½ ì•„ë¬´ ì‘ì—… ì—†ì´ ì›¹í˜ì´ì§€ ìƒì„±ëœ ê²ƒì„.


â– â– â–  2. GitHubì— ì½”ë“œ ì˜¬ë¦¬ê¸°

git init ê¸°íŠ¸ ì´ˆê¸°í™”
 .git í´ë” ìƒê¹€ : Initialized empty Git repository in C:/drawenglish-api/.git/

git add . ì „ì²´íŒŒì¼ Gitì— ì¶”ê°€ .ì€ í´ë” ì•ˆ ëª¨ë“  íŒŒì¼ ì¶”ê°€í•˜ëŠ” ëª…ë ¹

git branch  ê¸°íŠ¸ ë¸Œëœì¹˜ ì´ë¦„ í™•ì¸ : main ì´ì–´ì•¼ í•¨(ìš”ì¦˜ì€ mainì€ ì“´ë‹¤ê³  í•¨)
  (no branch) ë˜ëŠ” masterë¼ê³  ë‚˜ì˜¬ ìˆ˜ ìˆìŒ.

git branch -M main  ë¸Œëœì¹˜ ë§Œë“¤ê¸°(ë˜ëŠ” ì´ë¦„ ë°”ê¾¸ê¸°) / -M ì˜µì…˜ì€ 'ì´ë¦„ ê°•ì œ ë³€ê²½'

git commit -m "Initial commit for DrawEnglish API" ì»¤ë°‹í•˜ê¸°(ë³€ê²½ì‚¬í•­ ì €ì¥)
  -mì˜µì…˜ì€ ë©”ì‹œì§€

GitHubì— ìƒˆ ë ˆí¬ì§€í† ë¦¬ ë§Œë“¤ê¸°
  https://github.com ì ‘ì†
  ì˜¤ë¥¸ìª½ ìœ„ + ë²„íŠ¼ â†’ New repository
  Repository ì´ë¦„ì€ ì˜ˆë¥¼ ë“¤ë©´ drawenglish-api
  ë¹„ê³µê°œ(private) / ê³µê°œ(public) ì„ íƒì€ ììœ 
  README íŒŒì¼ ì¶”ê°€í•˜ì§€ ë§ˆ! (ì¶©ëŒë‚˜ë‹ˆê¹Œ)
â˜ GitHub (ë ˆí¬) ì£¼ì†Œ ìƒì„± : https://github.com/drawenglish/drawenglish-api.git


GitHub ì›ê²© ì €ì¥ì†Œ ì—°ê²°
git remote add origin https://github.com/drawenglish/drawenglish-api.git


GitHub Pages ì„¤ì •
GitHubì—ì„œ drawenglish-api ë ˆí¬ ì—´ê³  ì˜¤ë¥¸ìª½ ìœ„ Settings íƒ­ í´ë¦­ - 
ì™¼ìª½ ì‚¬ì´ë“œë°”ì—ì„œ Pages í´ë¦­
- Source: Deploy from a branch
- Branch: main
- Folder: / (root)
Saveí•´ì„œ ì €ì¥


GitHubì— Push(ì˜¬ë¦¬ê¸°) : ì—ëŸ¬ê°€ ë‚˜ ê°•ì œë¡œ ì˜¬ë¦´ë•ŒëŠ” -f ì˜µì…˜ ì‚¬ìš©(í•˜ì§€ë§Œ ì£¼ì˜)
â˜… git push -u origin main
â˜ GitHubì— ì½”ë“œê°€ ì˜¬ë¼ê° : .git, venv í´ë”ëŠ” ì•ˆì˜¬ë¼ê°.
   : ë¡œì»¬ì— ìˆëŠ” /appí´ë”/__pycache__í´ë”, main.pyê°€ ê·¸ëŒ€ë¡œ ì˜¬ë¼ê°

requirements.txt ë§Œë“¤ê¸°
pip freeze > requirements.txt  â†’ ë¡œì»¬ì— íŒŒì¼ ë§Œë“¤ì–´ì§€ê³  ì•„ë˜ ê²ƒë“¤ì´ ì…ë ¥ë¨
  annotated-types==0.7.0          (í˜„ì¬ ë¡œì»¬PCì— ì„¤ì¹˜ëœ ìš”ì†Œë“¤ì´ ì €ì¥ë¨)
  anyio==4.9.0
  click==8.1.8
  colorama==0.4.6
  fastapi==0.115.12
  h11==0.16.0
  idna==3.10
  pydantic==2.11.4
  pydantic_core==2.33.2
  sniffio==1.3.1
  starlette==0.46.2
  typing-inspection==0.4.0
  typing_extensions==4.13.2
  uvicorn==0.34.2

pip install -r requirements.txt
  ì´ ëª…ë ¹ì„ ë¡œì»¬ì—ì„œ ì‹¤í–‰í•˜ë©´ requirements.txtì— ì…ë ¥ëœ êµ¬ì„±ìš”ì†Œë“¤ì´ ë¡œì»¬ì— ì„¤ì¹˜ë¨
  ì´ íŒŒì¼ì„ githubì— ì €ì¥í•´ ë†“ìœ¼ë©´ render ê°™ì€ ì„œë²„í™˜ê²½ì— íŒŒì´ì¬ íŒ¨í‚¤ì§€ë“¤ì„ ì„¤ì¹˜í•˜ëŠ” ê²ƒì„

â€» git pushëŠ” "ì»¤ë°‹ëœ ë³€ê²½ì‚¬í•­"ë§Œ ì˜¬ë ¤. ë¨¼ì € pushí•  íŒŒì¼ì„ addí•˜ê³  commití•´ì•¼ í•¨.
git add requirements.txt
git commit -m "Add requirements.txt"

â˜… git push -u origin main
â˜ GitHubì— add, commití•œ requirements.txtê°€ ì˜¬ë¼ê°



â– â– â–  Renderì— ë°°í¬í•˜ê¸°

1. https://render.com ì ‘ì† â†’ ë¡œê·¸ì¸
(ì²˜ìŒì´ë¼ë©´ GitHub ì—°ë™ë„ í•  ìˆ˜ ìˆì–´)
2. ìƒë‹¨ ë©”ë‰´ â†’ New â†’ Web Service ì„ íƒ
3. ë°°í¬ ì„¤ì •
ì´ë¦„ : drawenglish-api (ì›í•˜ëŠ” ì´ë¦„ ê°€ëŠ¥)
GitHub ë¦¬í¬ì§€í† ë¦¬ : drawenglish-api ì„ íƒ
Branch : main
Build Command : pip install -r requirements.txt ì´ ìë™ìœ¼ë¡œ ì±„ì›Œì§ (ë¹„ì›Œë„ ë¨)
Start Command : uvicorn app.main:app --host 0.0.0.0 --port 10000
í™˜ê²½ : Python
plan ì„ íƒ

Deploy ì‹¤í–‰

ë°°í¬ê°€ ì™„ë£Œë˜ë©´ â†’
Live URLì´ ìƒì„±ë¼! ( https://drawenglish-api.onrender.com )
 â˜ ì´ê±¸ ìš°ë¦¬ê°€ openapi.jsonì— ë„£ê³ , GPTsì—ì„œë„ ì—°ê²°í•˜ê²Œ ë  ê±°ì•¼.
 â€»ë¸Œë¼ìš°ì €ì—ì„œ ì ‘ì†ë³´ë©´ 200 OK ë˜ëŠ” {"detail":"Not Found"} ë‚˜ì˜¬ ìˆ˜ë„ ìˆì–´ â†’ ê´œì°®ì•„!
â˜…â˜… https://drawenglish-api.onrender.com/docs ì ‘ì†í•˜ë©´ Swagger UI ì—´ë¦¼
     : analyze í…ŒìŠ¤íŠ¸ í•´ë³´ë©´ ë¨.


â– â– â–   openapi.json ë§Œë“¤ì–´ì„œ GPTs ì—°ê²°
GPTsì— ë¶™ì¼ ìˆ˜ ìˆê²Œ OpenAPI ìŠ¤í™(openapi.json) íŒŒì¼ì„ ë§Œë“¤ì–´ì„œ
â†’ Render ì„œë²„ì˜ /openapi.json ê²½ë¡œì— ë…¸ì¶œì‹œí‚¤ëŠ” ê³¼ì •

openapi.json íŒŒì¼ ë§Œë“¤ì–´ ì•„ë˜ ì†ŒìŠ¤ë¥¼ ì…ë ¥í•œë‹¤.

{
  "openapi": "3.1.0",
  "info": {
    "title": "DrawEnglish API",
    "version": "1.0.0"
  },
  "servers": [
    {
      "url": "https://drawenglish-api.onrender.com"
    }
  ],
  "paths": {
    "/analyze": {
      "post": {
        "operationId": "analyzeSentence",
        "summary": "Analyze an English sentence",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "sentence": {
                    "type": "string"
                  }
                },
                "required": ["sentence"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "sentence": { "type": "string" },
                    "diagramming": { "type": "string" }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}


astAPIì—ì„œ /openapi.json ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€ (/openapi.json FastAPIì—ì„œ ì„œë¹™)
ë¬´ìŠ¨ ë§ì´ëƒë©´ ë„Œ ì§€ê¸ˆ GitHubì—ë§Œ ì˜¬ë ¤ë†¨ê³ ,
Render ì„œë²„ì—ì„œëŠ” /openapi.json ì£¼ì†Œê°€ ì•„ì§ ì‘ë‹µ ì•ˆ ë  ê±°ì•¼.
ğŸ‘‰ ê·¸ë˜ì„œ FastAPI ì½”ë“œ(app/main.py)ì— ì´ í•œ ì¤„ ì¶”ê°€ë§Œ í•˜ë©´ ë¼:

from fastapi.responses import FileResponse
import os

@app.get("/openapi.json", include_in_schema=False)
async def serve_openapi():
    file_path = os.path.join(os.path.dirname(__file__), "..", "openapi.json")
    return FileResponse(file_path, media_type="application/json")


GitHubì— ë³€ê²½ì‚¬í•­ í‘¸ì‹œ
git add .
git commit -m "Add openapi.json and expose via /openapi.json"
git push -u origin main

GitHub í‘¸ì‹œë˜ë©´ Renderê°€ ìë™ìœ¼ë¡œ ìƒˆë¡œ ë°°í¬í•´ì¤Œ

ë°°í¬í›„ í™•ì¸
https://drawenglish-api.onrender.com/openapi.json ì ‘ì†í•´ JSON ìŠ¤í™ì´ ë³´ì´ë©´ OK!
ê·¸ëŸ¼ GPTsì—ì„œ â€œì™¸ë¶€ API ì—°ê²°â€ë¡œ ë¶™ì¼ ìˆ˜ ìˆì–´


â€» ì°¸ê³ ì‚¬í•­ : ë¡œì»¬í´ë”ì™€ Git ì›ê²© ì£¼ì†Œ ì—°ê²° í™•ì¸
(venv) C:\drawenglish-api>git remote -v
origin  https://github.com/drawenglish/drawenglish-api.git (fetch)
origin  https://github.com/drawenglish/drawenglish-api.git (push)

ë§Œì•½ drawenglish-api-v2.git ê°™ì´ ë§ì§€ì•ŠëŠ” ì£¼ì†Œê°€ ë‚˜ì˜¤ë©´ ìƒˆ ë ˆí¬ ì£¼ì†Œë¡œ ë°”ê¿”ì¤˜ì•¼ í•´:
git remote set-url origin https://github.com/drawenglish/drawenglish-api.git



â– â– â–   openapi.jsonì„ GPTs ì—°ê²°

ë¨¼ì € https://drawenglish-api.onrender.com/openapi.jsonì„ ì—´ì–´ë³¸ë‹¤.
ë‚´ìš©ìœ¼ë¡œ ë³´ì—¬ì£¼ëŠ” ê±´ FastAPIê°€ ìë™ ìƒì„±í•œ OpenAPI ìŠ¤í™ JSONì„.
ì™œ ì´ë ‡ê²Œ ë³´ì—¬ ì£¼ëƒë©´?
FastAPIëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ìì²´ OpenAPI ë¬¸ì„œë¥¼ ê°€ì§€ê³  ìˆê³ ,
ì•„ë¬´ ì„¤ì • ì—†ì´ /openapi.jsonì„ ìš”ì²­í•˜ë©´ ìë™ìœ¼ë¡œ ë‚´ë¶€ ìŠ¤í™ì„ ë³´ì—¬ì¤˜.
ê·¸ë˜ì„œ ë„ˆê°€ ë§Œë“  openapi.json íŒŒì¼ì„ ë³´ì—¬ì£¼ëŠ” ê²Œ ì•„ë‹ˆë¼
FastAPIê°€ ë‚´ë¶€ì—ì„œ ìë™ ìƒì„±í•œ ìŠ¤í™ì„ ë³´ì—¬ì£¼ê³  ìˆì–´.
â˜ ì‹¤ì œ openapi.jsoníŒŒì¼ì— ì…ë ¥ëœ ë‚´ìš©ì„ ë³´ì—¬ì£¼ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ëŠ” ì–˜ê¸°ì„.
   ê·¸ë˜ì„œ "servers": [ ê´€ë ¨ ë‚´ìš©ì´ ì›¹í˜ì´ì§€ì—ë„ ê°€ì ¸ì˜¤ê¸° ê²°ê³¼ì—ë„ ì•ˆë³´ëŠëŠ” ê²ƒì„

GPTsì—ì„œ ìŠ¤í‚¤ë§ˆ URLì—ì„œ ê°€ì ¸ì˜¤ê¸°ì— ì´ë˜ ì£¼ì†Œ ì…ë ¥ í›„ ê°€ì ¸ì˜¤ê¸°
https://drawenglish-api.onrender.com/openapi.json

â˜ ìœ„ì˜ ì´ìœ ë¡œ GPTsì—ì„œ URLì—ì„œ ê°€ì ¸ì˜¤ê¸°í•˜ë©´ 
   Could not find a valid URL in servers ì—ëŸ¬ê°€ ë°œìƒí•  ìˆ˜ ìˆìŒ.

ê·¸ë˜ì„œ ìš°ë¦¬ê°€ ë§Œë“  ì»¤ìŠ¤í…€ openapi.jsonìœ¼ë¡œ GPTsì™€ ì—°ê²°í•˜ê³  ì‹¶ë‹¤ë©´?
ìš°ë¦¬ê°€ ë§Œë“  JSON íŒŒì¼ (C:\drawenglish-api\openapi.json)ì´ GPTsì™€ ì—°ë™ë˜ë„ë¡ í•˜ë ¤ë©´,
FastAPI ì½”ë“œì—ì„œ ëª…í™•íˆ ì™¸ë¶€ JSON íŒŒì¼ì„ ì‘ë‹µí•˜ë„ë¡ ìˆ˜ì •í•´ì•¼ í•´.

main.pyì˜ ë‚´ìš©ì—ì„œ openapi.jsonì„ custom-openapi.json ìœ¼ë¡œ ìˆ˜ì •í•¨.
@app.get("/custom-openapi.json", include_in_schema=False)

GitHub Commití•˜ê³  Push â†’ Render Deploying
â˜ server ë¶€ë¶„ í™•ì‹¤íˆ ìˆìŒ

GPTsì—ì„œ ìŠ¤í‚¤ë§ˆ URLì—ì„œ ê°€ì ¸ì˜¤ê¸°ì— ì•„ë˜ ì£¼ì†Œ ì…ë ¥ í›„ ê°€ì ¸ì˜¤ê¸°
https://drawenglish-api.onrender.com/custom-openapi.json
â˜ ì„±ê³µí•¨!!!


GPTs ë§í¬ ê³µìœ í•˜ê¸°
ìš°ì¸¡ìƒë‹¨ 'ê³µìœ í•˜ê¸°' - 'ë§í¬ê°€ ìˆëŠ” ëª¨ë“  ì‚¬ëŒ' ì„ íƒ - 'ì €ì¥'
- ê³µìœ  ë§í¬ë¥¼ ë³µì‚¬í•  ìˆ˜ ìˆìŒ
  ì˜ˆ) https://chatgpt.com/g/g-6810dd0c0df48191afb83d3bb158e20a-draw-english-sentence-diagramming


â–  GPTsì— ê°œì¸ì •ë³´ë³´í˜¸ì •ì±… ì„¤ì •(privacy.html ì—°ê²°)

c:\drawenglish-api í´ë”ì— privacy.html ë§Œë“¤ê³  ì•„ë˜ ì†ŒìŠ¤ ì…ë ¥
<!-- privacy.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Privacy Policy</title>
</head>
<body>
  <h1>Privacy Policy</h1>
  <p>This service does not collect or store any personal data.</p>
  <p>All user inputs are processed in real-time and are not saved.</p>
</body>
</html>
â˜ ì €ì¥í•˜ê³  ì»¤ë°‹ í›„ í‘¸ì‹œ



â– â– â–   DrawEnglish ì—”ì§„(Fast API?) + OpenAI GPT-4 APIì— ì§€ì¹¨(prompt) ì§€ì¹¨ ì—°ë™

âœ… OpenAI API í‚¤ í•„ìš” (ë„¤ê°€ ì´ë¯¸ ìˆë‹¤ê³  í–ˆì§€!)
âœ… Python ë¼ì´ë¸ŒëŸ¬ë¦¬ openai ì„¤ì¹˜ í•„ìš”
pip install openai
âœ… ë„¤ OpenAI API í‚¤ë¥¼ ì„œë²„ì— ì„¤ì • (Tip: .env íŒŒì¼ë¡œ ìˆ¨ê²¨ë‘ëŠ” ê±¸ ì¶”ì²œí•´!)
OPENAI_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxx


â–  API í‚¤ê´€ë¦¬

1) ë¡œì»¬ì„ ìœ„í•œ ì„¸íŒ…
c:\drawenglish-api í´ë”ì— .env íŒŒì¼ ìƒì„± ì•„ë˜ ì…ë ¥í•˜ê³  ì €ì¥
OPENAI_API_KEY=í‚¤ê°’
 â€».envëŠ” ì ˆëŒ€ GitHubì— ì—…ë¡œë“œ í•˜ë©´ ì•ˆë¨(í•˜ë ¤ê³  í•´ë„ ê²½ê³ /ì—ëŸ¬ ë©”ì‹œì§€ ë‚¨)
c:\drawenglish-api í´ë”ì— .gitignore íŒŒì¼ ìƒì„±í•˜ê³  ì•„ë˜ ì…ë ¥í•˜ê³  ì €ì¥
.env
__pycache__/
*.pyc
 â€» ì´ë¡œì¸í•´ .envê°€ ì—…ë¡œë“œ ë˜ëŠ” ê²ƒì„ ë°©ì§€í•œë‹¤.

2) Renderì— OpenAI í‚¤ ë“±ë¡í•˜ê¸°(Renderì—ì„œ í™˜ê²½ë³€ìˆ˜ ì„¤ì •)
Renderì— ë¡œê·¸ì¸ í›„ ë°°í¬í•œ ì„œë¹„ìŠ¤(Project) ì„ íƒ(ì˜ˆ: drawenglish-api)
ìƒë‹¨ íƒ­ì—ì„œ â€œEnvironmentâ€ ë˜ëŠ” â€œEnvironment Variablesâ€ í´ë¦­
Keyì— â†’ OPENAI_API_KEY
Valueì— â†’ sk-xxxxxxxxxxxxxx í‚¤ ê°’ ì…ë ¥
ì €ì¥ (ìë™ ì ìš©ë¨)
 â€» ê·¸ëŸ¼ ì„œë²„ê°€ ì¬ì‹œì‘ë  ë•Œ ì´ í™˜ê²½ë³€ìˆ˜ê°€ ìë™ìœ¼ë¡œ ì ìš©ë¼!


â–  main.pyì— í•„ìš”í•œ ì†ŒìŠ¤ ì…ë ¥

#ì•„ë˜ 2ì¤„ì€ FastAPIì—ì„œ /openapi.json ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€í•˜ê¸° ìœ„í•œ ë¶€ë¶„
from fastapi.responses import FileResponse
import os

#ì•„ë˜ 4ì¤„ì€ openai GPT í˜¸ì¶œê³¼ í™˜ê²½ë³€ìˆ˜ ë¡œë”©ì„ ê°€ëŠ¥í•˜ê²Œ í•˜ê¸° ìœ„í•œ ë¶€ë¶„
import openai
from dotenv import load_dotenv
load_dotenv()
openai.api_key = os.getenv("OPENAI_API_KEY")

#ì•„ë˜ëŠ” í•¨ìˆ˜ëŠ” FastAPIì—ì„œ /openapi.json ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€í•˜ê¸° ìœ„í•œ ë¶€ë¶„
@app.get("/custom-openapi.json", include_in_schema=False)
async def serve_openapi():
    file_path = os.path.join(os.path.dirname(__file__), "..", "openapi.json")
    return FileResponse(file_path, media_type="application/json")

â˜ ìœ„ì˜ dotenv ê´€ë ¨ ì„¤ì •ì´ ì‘ë™ë˜ê¸° ìœ„í•´ python-dotenvë¥¼ ì„¤ì¹˜í•´ì•¼í•¨.
pip install python-dotenv











ë‹¤ë¥¸ PCì—ì„œ ê°œë°œí™˜ê²½ì„ êµ¬ì¶•(ë™ê¸°í™”)í•˜ê³ ì í• ë•Œ
----------------------------------------------

1.PCì—ì„œ ê¸°ì¡´ C:\drawenglish-api í´ë” ì •ë¦¬
ë¨¼ì € ê¹¨ë—í•˜ê²Œ ì‹œì‘í•  ê±°ì•¼.
ë§Œì•½ C:\drawenglish-api í´ë” ì•ˆì— ì˜ë¯¸ ì—†ëŠ” íŒŒì¼(ë¹„ì–´ìˆê±°ë‚˜ ì“°ë‹¤ë§Œ ê±°) ìˆë‹¤ë©´
ê·¸ í´ë”ë¥¼ í†µì§¸ë¡œ ì‚­ì œí•´ì¤˜.
(ë˜ëŠ” ì´ë¦„ ë°”ê¿”ë„ ë¨: ì˜ˆ drawenglish-api-old ì´ëŸ° ì‹ìœ¼ë¡œ.)

C:\drawenglish-api (âŒ ì‚­ì œ ë˜ëŠ” í´ë”ëª… ë³€ê²½)

2. ìƒˆë¡œ GitHubì—ì„œ í”„ë¡œì íŠ¸ ë³µì œ (clone)
ì•„ì˜ˆ ì²˜ìŒë¶€í„° GitHubì—ì„œ ìµœì‹  íŒŒì¼ì„ ê°€ì ¸ì˜¤ì!
í„°ë¯¸ë„(cmd) ë˜ëŠ” Git Bash ì—´ê³ :

cd C:\
git clone https://github.com/DrawEnglish/drawenglish-api.git

ì´ ëª…ë ¹ì–´ ì…ë ¥í•˜ë©´:
C:\drawenglish-api\ í´ë”ê°€ ìë™ìœ¼ë¡œ ë§Œë“¤ì–´ì§€ê³ 
GitHubì— ìˆë˜ ìµœì‹  ì½”ë“œê°€ ë‹¤ ë‚´ë ¤ì™€!
âœ… ì—¬ê¸°ì—ëŠ” app/main.py, openapi.json, .git í´ë”ê¹Œì§€ ë‹¤ ë“¤ì–´ì˜¬ ê±°ì•¼.

3. ë‚´ë ¤ì™”ëŠ”ì§€ í™•ì¸

cd drawenglish-api
dir

(ë˜ëŠ” ìœˆë„ìš° íƒìƒ‰ê¸°ë¡œ C:\drawenglish-api í´ë” ì—´ì–´ë´.)
app/
openapi.json
requirements.txt (ìˆë‹¤ë©´)
.git (ìˆ¨ê¹€ íŒŒì¼)
ì´ëŸ° íŒŒì¼/í´ë”ê°€ ë³´ì´ë©´ ì„±ê³µì´ì•¼! âœ¨

4. ê°€ìƒí™˜ê²½(venv) ë‹¤ì‹œ ì„¸íŒ… (ì„ íƒ)
ë§Œì•½ ìƒˆë¡œìš´ ì»´í“¨í„° í™˜ê²½ì´ë¼ë©´:
python -m venv venv
.\venv\Scripts\activate

pip install fastapi uvicorn  #í•„ìˆ˜ íŒ¨í‚¤ì§€ ì„¤ì¹˜
ğŸ“¦ FastAPI ì„œë²„ë¥¼ ë¡œì»¬ì—ì„œ ëŒë¦¬ê³  ì‹¶ì„ ë•Œ ì„¤ì¹˜í•´ì•¼ í•¨.

ë˜ëŠ” 
pip install -r requirements.txt ëª…ë ¹ìœ¼ë¡œ ì¼ê´„? ì„¤ì¹˜

ë¡œì»¬ ì„œë²„ ì‹¤í–‰
uvicorn app.main:app --reload
http://127.0.0.1:8000/docs ì›¹í˜ì´ì§€ ì—´ë¦¼


5. ë­”ê°€ ì‘ì—… í›„ì—” ë°˜ë“œì‹œ ì»¤ë°‹ + í‘¸ì‹œ
git add .
git commit -m "Update diagram logic"
git push origin main


â€» drawenglish-api í´ë” ìì²´ë¥¼ í†µì±„ë¡œ ì••ì¶•í•´ì„œ ë³µì‚¬í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ê°œë°œí™˜ê²½ êµ¬ì¶• í• ë•ŒëŠ”
   'venv' í´ë”ëŠ” ì œì™¸í•´ì•¼ í•˜ê³ , ì•„ë˜ ëª…ë ¹ìœ¼ë¡œ ìƒˆë¡œ ë§Œë“œëŠ”ê²Œ ì•ˆì „
   (OS ì°¨ì´ë¡œ ë¬¸ì œ ë°œìƒ í•  ìˆ˜ ìˆìŒ)

   cd drawenglish-api
   python -m venv venv
   venv\Scripts\activate
   pip install fastapi uvicorn  ë˜ëŠ”  pip install -r requirements.txt
   uvicorn app.main:app --reload


â– â– â–  Python ì½˜ì†”ì—ì„œ ì†ŒìŠ¤ í…ŒìŠ¤íŠ¸ í•˜ê³  ì‹¶ì„ë•Œ


â–  cmdì°½ì—ì„œ ì§ì ‘ ì‹¤í–‰
(venv) C:\drawenglish-api> python app/main.py

â–  ë˜ëŠ” Python ì½˜ì†”ë¡œ ì§„ì…í•´ì„œí•˜ëŠ” ë°©ë²•

cd c:\drawenglish-api\app   #appí´ë”ë¡œ ì´ë™í•´ì•¼í•¨.

python

>>> from main import print_parsed_roles
ë˜ëŠ” ë³„ë„ì˜ pyë¡œ ë§Œë“¤ì—ˆì„ ê²½ìš°
from test_tools import print_parsed_roles

print_parsed_roles("She loves music.")






ê¸°íƒ€ ì°¸ê³ ì‚¬í•­
-------------

main.pyì™€ openapi.jsonì€ ë§ì¶”ì–´ì„œ ìˆ˜ì •í•´ ì£¼ì–´ì•¼ í•œë‹¤.

Python ì½”ë“œ ì‘ì—…ì„ ìˆ˜ì›”í•˜ê²Œ í•˜ê³  ì‹¶ë‹¤ë©´ VS Code ì„¤ì¹˜



ì‘ì—… ì „ ì¡°ì¹˜ì‚¬í•­
----------------

python -m venv venv
venv\Scripts\activate

git add .
git commit -m "Update DrawEnglish-API"
git push origin main

pip freeze > requirements.txt

pip install -r requirements.txt
uvicorn app.main:app --reload


